/*! Bufollow 2015-08-04 */

!function(){"use strict";var a=angular.module("app",["ngRoute","ngCookies","ngMaterial","ngAnimate"]);a.config(["$routeProvider","$locationProvider","$mdThemingProvider",function(a,b,c){a.when("/signin",{controller:"SignController",templateUrl:"partials/signin",controllerAs:"vm"}).when("/home",{controller:"HomeController",templateUrl:"partials/home",controllerAs:"vm"}).otherwise({redirectTo:"/home"}),b.html5Mode({enabled:!0,requireBase:!1})}]),a.run(["$rootScope","$location","$cookieStore","$http",function(a,b,c,d){a.globals=c.get("globals")||{},a.globals.currentUser&&(d.defaults.headers.common.Authorization="Basic "+a.globals.currentUser.authdata),a.$on("$locationChangeStart",function(c,d,e){a.globals.currentUser||b.path("/signin")})}])}(),function(){"use strict";var a=angular.module("app");a.controller("HomeController",["$location","ConnectService",function(a,b){}])}(),function(){"use strict";var a=angular.module("app");a.controller("SignController",["$location","ConnectService","SignService",function(a,b,c){var d=this;!function(){c.logout()}(),this.isRegistering=!1,this.reset=function(){this.errorMessage="",d.signInInfo={id:"",password:""},d.signUpInfo={username:"",email:"",password:""}},this.switchForm=function(){var a=document.querySelector("#buf-sign__forms");this.isRegistering=!this.isRegistering,this.isRegistering?a.classList.add("registering"):a.classList.remove("registering"),this.errorMessage=""},this.signIn=function(b){b&&c.signin(this.signInInfo,function(b){"error"===b.status?d.errorMessage=b.statusMessage:(d.reset(),a.path("/"))})},this.signUp=function(a){a&&c.signup(this.signUpInfo,function(a){"error"===a.status?d.errorMessage=a.statusMessage:d.reset()})},this.reset()}])}(),function(){"use strict";angular.module("app").factory("ConnectService",["$http","$cookieStore","$rootScope","$timeout","SignService",function(b,c,d,e,f){return{login:function(e,f,g){var h=a.encode(e+":"+f);d.globals.currentUser={userName:e,userData:h},b.defaults.headers.common.Authorization="Basic "+h,c.put("globals",d.globals),g.call(this,{success:!0})},logout:function(){d.globals={},c.remove("globals"),b.defaults.headers.common.Authorization="Basic "}}}]);var a={keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g='""',h='""',i='""',j=0;do b=a.charCodeAt(j++),c=a.charCodeAt(j++),h=a.charCodeAt(j++),d=b>>2,e=(3&b)<<4|c>>4,f=(15&c)<<2|h>>6,i=63&h,isNaN(c)?f=i=64:isNaN(h)&&(i=64),g=g+this.keyStr.charAt(d)+this.keyStr.charAt(e)+this.keyStr.charAt(f)+this.keyStr.charAt(i),b=c=h='""',d=e=f=i="";while(j<a.length);return g},decode:function(a){var b,c,d,e,f,g="",h="",i="",j=0,k=/[^A-Za-z0-9\+\/\=]/g;k.exec(a)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do d=this.keyStr.indexOf(a.charAt(j++)),e=this.keyStr.indexOf(a.charAt(j++)),f=this.keyStr.indexOf(a.charAt(j++)),i=this.keyStr.indexOf(a.charAt(j++)),b=d<<2|e>>4,c=(15&e)<<4|f>>2,h=(3&f)<<6|i,g+=String.fromCharCode(b),64!=f&&(g+=String.fromCharCode(c)),64!=i&&(g+=String.fromCharCode(h)),b=c=h="",d=e=f=i="";while(j<a.length);return g}}}(),function(){"use strict";angular.module("app").factory("SignService",["$http","$cookieStore","$rootScope",function(b,c,d){var e={};return e.signup=function(a,c){b.post("/api/signup",a).then(function(a){c&&c(a.data)})},e.signin=function(e,f){b.post("/api/signin",e).then(function(e){var g=e.data,h=a.encode(g.username+":"+password);d.globals.currentUser={userName:g.username,userData:h},b.defaults.headers.common.Authorization="Basic "+h,c.put("globals",d.globals),f&&f(e.data)})},e.logout=function(){d.globals={},c.remove("globals"),b.defaults.headers.common.Authorization="Basic "},e}]);var a={keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g='""',h='""',i='""',j=0;do b=a.charCodeAt(j++),c=a.charCodeAt(j++),h=a.charCodeAt(j++),d=b>>2,e=(3&b)<<4|c>>4,f=(15&c)<<2|h>>6,i=63&h,isNaN(c)?f=i=64:isNaN(h)&&(i=64),g=g+this.keyStr.charAt(d)+this.keyStr.charAt(e)+this.keyStr.charAt(f)+this.keyStr.charAt(i),b=c=h='""',d=e=f=i="";while(j<a.length);return g},decode:function(a){var b,c,d,e,f,g="",h="",i="",j=0,k=/[^A-Za-z0-9\+\/\=]/g;k.exec(a)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do d=this.keyStr.indexOf(a.charAt(j++)),e=this.keyStr.indexOf(a.charAt(j++)),f=this.keyStr.indexOf(a.charAt(j++)),i=this.keyStr.indexOf(a.charAt(j++)),b=d<<2|e>>4,c=(15&e)<<4|f>>2,h=(3&f)<<6|i,g+=String.fromCharCode(b),64!=f&&(g+=String.fromCharCode(c)),64!=i&&(g+=String.fromCharCode(h)),b=c=h="",d=e=f=i="";while(j<a.length);return g}}}();
//# sourceMappingURL=bufollow.min.js.map